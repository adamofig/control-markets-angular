@if (selected()) {
<app-node-toolbar (delete)="handleToolbarEvents('delete')" (none)="handleToolbarEvents('none')" (details)="handleToolbarEvents('details')"> </app-node-toolbar>
}

<div class="node-container" (dblclick)="openModal()" (click)="selectNode()">
  <div class="node-card" [ngClass]="'status-' + (jobExecutionState()?.status || 'default')">
    @if(baseMessage){
    <message-content-displayer [message]="baseMessage"></message-content-displayer>
    }
    <div class="audio-container">
      <p-tag [value]="node()?.data?.nodeData?.name" />
      <!-- <audio controls [src]="node()?.data?.nodeData?.storage?.url"></audio> -->

      <button (click)="playAudio()" label="Play" pButton icon="pi pi-play"></button>
      <button (click)="downloadAudio()" label="Download" pButton icon="pi pi-download"></button>
      @if(!hasTranscription){
      <button (click)="getTranscriptions()" label="Get Transcription"></button>
      }
    </div>

    <handle type="source" position="right" id="right" />
  </div>
</div>
